class d{constructor(){this.modalElement=null}render(t,n){this.close(),this.modalElement=document.createElement("div"),this.modalElement.classList.add("modal-backdrop");const a=document.createElement("div");a.classList.add("modal");const o=document.createElement("button");o.classList.add("modal-close"),o.textContent="X",o.setAttribute("aria-label","Close modal");const r=document.createElement("div");r.classList.add("modal-header");const c=document.createElement("h2");c.textContent=t,r.appendChild(c);const l=document.createElement("div");l.classList.add("modal-body");const s=document.createElement("div");s.innerHTML=n,l.appendChild(s),a.appendChild(o),a.appendChild(r),a.appendChild(l),this.modalElement.appendChild(a),document.body.appendChild(this.modalElement),this.modalElement.addEventListener("click",i=>{i.target===this.modalElement&&this.close()}),o.addEventListener("click",()=>{this.close()})}close(){this.modalElement&&(this.modalElement.remove(),this.modalElement=null)}}function f(e,t=document){return t.querySelector(e)}function h(e){return JSON.parse(localStorage.getItem(e))}function g(e,t){localStorage.setItem(e,JSON.stringify(t))}function E(e){return new URLSearchParams(window.location.search).get(e)}function m(e,t,n,a){t.insertAdjacentHTML("afterbegin",e)}async function u(e){return await(await fetch(e)).text()}async function S(){const e=await u("/WDD330/partials/header.html"),t=await u("/WDD330/partials/footer.html"),n=document.querySelector("#main-header"),a=document.querySelector("#main-footer");m(e,n),m(t,a),p();const o=document.querySelector("#search-form");o&&o.addEventListener("submit",c=>{c.preventDefault();const l=document.querySelector("#search-input");if(!l)return;const s=l.value.trim();if(!s)return;const i=s.toLowerCase().replace(/\s+/g,"-");window.location.href=`/WDD330/product_listing/index.html?q=${encodeURIComponent(i)}`});const r=document.querySelector("#newsletter-form");r&&r.addEventListener("submit",c=>{c.preventDefault(),new d().render("Newsletter Subscription","Thank you for subscribing!"),r.reset()}),localStorage.getItem("hasSeenWelcome")||(new d().render("Welcome to SleepOutside!","<p>Register now to enter our giveaway!</p>"),localStorage.setItem("hasSeenWelcome","true"))}function p(){const e=h("so-cart");if(e&&e.length>0){const t=e.length,n=document.querySelector(".cart a");if(n){let a=n.querySelector(".cart-count");a||(a=document.createElement("span"),a.classList.add("cart-count"),n.appendChild(a)),a.innerText=t}}}function L(e,t,n,a="afterbegin",o=!1){o&&(t.innerHTML="");const r=n.map(e);t.insertAdjacentHTML(a,r.join(""))}function y(){const e=document.querySelector(".cart");e&&(e.classList.add("cart-animate"),setTimeout(()=>{e.classList.remove("cart-animate")},500))}export{d as M,y as a,E as b,h as g,S as l,f as q,L as r,g as s,p as u};
