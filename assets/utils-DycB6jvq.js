(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function a(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(e){if(e.ep)return;e.ep=!0;const o=a(e);fetch(e.href,o)}})();class d{constructor(){this.modalElement=null}render(n,a){this.close(),this.modalElement=document.createElement("div"),this.modalElement.classList.add("modal-backdrop");const r=document.createElement("div");r.classList.add("modal");const e=document.createElement("button");e.classList.add("modal-close"),e.textContent="X",e.setAttribute("aria-label","Close modal");const o=document.createElement("div");o.classList.add("modal-header");const s=document.createElement("h2");s.textContent=n,o.appendChild(s);const c=document.createElement("div");c.classList.add("modal-body");const l=document.createElement("div");l.innerHTML=a,c.appendChild(l),r.appendChild(e),r.appendChild(o),r.appendChild(c),this.modalElement.appendChild(r),document.body.appendChild(this.modalElement),this.modalElement.addEventListener("click",i=>{i.target===this.modalElement&&this.close()}),e.addEventListener("click",()=>{this.close()})}close(){this.modalElement&&(this.modalElement.remove(),this.modalElement=null)}}function h(t,n=document){return n.querySelector(t)}function f(t){return JSON.parse(localStorage.getItem(t))}function g(t,n){localStorage.setItem(t,JSON.stringify(n))}function y(t){return new URLSearchParams(window.location.search).get(t)}function m(t,n,a,r){n.insertAdjacentHTML("afterbegin",t)}async function u(t){return await(await fetch(t)).text()}async function L(){const t=await u("/WDD330/partials/header.html"),n=await u("/WDD330/partials/footer.html"),a=document.querySelector("#main-header"),r=document.querySelector("#main-footer");m(t,a),m(n,r),p();const e=document.querySelector("#search-form");e&&e.addEventListener("submit",s=>{s.preventDefault();const c=document.querySelector("#search-input");if(!c)return;const l=c.value.trim();if(!l)return;const i=l.toLowerCase().replace(/\s+/g,"-");window.location.href=`/WDD330/product_listing/index.html?q=${encodeURIComponent(i)}`});const o=document.querySelector("#newsletter-form");o&&o.addEventListener("submit",s=>{s.preventDefault(),new d().render("Newsletter Subscription","Thank you for subscribing!"),o.reset()}),localStorage.getItem("hasSeenWelcome")||(new d().render("Welcome to SleepOutside!","<p>Register now to enter our giveaway!</p>"),localStorage.setItem("hasSeenWelcome","true"))}function p(){const t=f("so-cart");if(t&&t.length>0){const n=t.length,a=document.querySelector(".cart a");if(a){let r=a.querySelector(".cart-count");r||(r=document.createElement("span"),r.classList.add("cart-count"),a.appendChild(r)),r.innerText=n}}}function E(t,n,a,r="afterbegin",e=!1){e&&(n.innerHTML="");const o=a.map(t);n.insertAdjacentHTML(r,o.join(""))}function S(){const t=document.querySelector(".cart");t&&(t.classList.add("cart-animate"),setTimeout(()=>{t.classList.remove("cart-animate")},500))}export{d as M,S as a,y as b,f as g,L as l,h as q,E as r,g as s,p as u};
